<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Mario - Corrections</title>
    <style>
        body { 
            margin: 0; 
            padding: 20px; 
            background: #333; 
            color: white; 
            font-family: Arial, sans-serif; 
        }
        canvas { 
            border: 2px solid white; 
            background: #5C94FC; 
        }
        .info {
            margin: 20px 0;
            padding: 10px;
            background: rgba(255,255,255,0.1);
            border-radius: 5px;
        }
        .controls {
            display: flex;
            gap: 10px;
            margin: 10px 0;
        }
        button {
            padding: 10px 15px;
            background: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        button:hover {
            background: #45a049;
        }
    </style>
</head>
<body>
    <h1>üçÑ Test Mario - Corrections</h1>
    
    <div class="info">
        <h3>Tests de correction :</h3>
        <ul>
            <li>‚úÖ Ennemis positionn√©s sur le sol (pas dedans)</li>
            <li>‚úÖ Blocs destructibles quand Mario est grand</li>
            <li>‚úÖ Physique am√©lior√©e pour tous les √©l√©ments</li>
            <li>‚úÖ Collisions pr√©cises</li>
        </ul>
    </div>
    
    <div class="controls">
        <button onclick="startGame()">üéÆ D√©marrer Mario</button>
        <button onclick="toggleDebug()">üêõ Debug</button>
        <button onclick="givePowerUp()">üçÑ Power-Up</button>
        <button onclick="nextLevel()">‚û°Ô∏è Niveau suivant</button>
    </div>
    
    <canvas id="gameCanvas" width="800" height="600"></canvas>
    
    <div class="info">
        <h4>Contr√¥les :</h4>
        <p>
            <strong>Mouvement :</strong> ‚Üê‚Üí ou A/D | 
            <strong>Saut :</strong> Espace ou Z | 
            <strong>Boules de feu :</strong> X ou C | 
            <strong>Courir :</strong> Shift
        </p>
    </div>
    
    <!-- Tous les scripts Mario -->
    <script src="mario-audio.js"></script>
    <script src="mario-input.js"></script>
    <script src="mario-ui.js"></script>
    <script src="mario-entities.js"></script>
    <script src="mario-objects.js"></script>
    <script src="mario-enemies.js"></script>
    <script src="mario-player.js"></script>
    <script src="mario-levels.js"></script>
    <script src="mario-main.js"></script>
    
    <script>
        let game = null;
        
        function startGame() {
            const canvas = document.getElementById('gameCanvas');
            const ctx = canvas.getContext('2d');
            
            if (game) {
                game.stop();
            }
            
            game = new MarioGame(canvas, ctx);
            game.start();
            
            console.log('Test Mario d√©marr√© !');
        }
        
        function toggleDebug() {
            if (game && game.uiManager) {
                game.uiManager.toggleDebug();
            }
        }
        
        function givePowerUp() {
            if (game && game.mario) {
                game.mario.collectPowerup('mushroom');
                console.log('Power-up donn√© !');
            }
        }
        
        function nextLevel() {
            if (game) {
                game.loadLevel(game.currentLevel + 1);
                console.log('Niveau suivant charg√© !');
            }
        }
        
        // Tests automatiques
        function runTests() {
            console.log('=== TESTS MARIO ===');
            
            // Test 1: V√©rifier que les classes existent
            console.log('Test 1 - Classes d√©finies:');
            console.log('MarioGame:', typeof MarioGame);
            console.log('Mario:', typeof Mario);
            console.log('Enemy:', typeof Enemy);
            console.log('BrickBlock:', typeof BrickBlock);
            
            // Test 2: Cr√©er une instance
            console.log('Test 2 - Cr√©ation instance...');
            try {
                const canvas = document.getElementById('gameCanvas');
                const ctx = canvas.getContext('2d');
                const testGame = new MarioGame(canvas, ctx);
                console.log('‚úÖ Instance cr√©√©e avec succ√®s');
                
                // Test 3: V√©rifier les composants
                console.log('Test 3 - Composants:');
                console.log('EntityManager:', !!testGame.entityManager);
                console.log('LevelManager:', !!testGame.levelManager);
                console.log('AudioSystem:', !!testGame.audioSystem);
                console.log('InputManager:', !!testGame.inputManager);
                console.log('UIManager:', !!testGame.uiManager);
                
            } catch (error) {
                console.error('‚ùå Erreur cr√©ation instance:', error);
            }
            
            console.log('=== FIN TESTS ===');
        }
        
        // Lancer les tests au chargement
        window.addEventListener('load', () => {
            runTests();
            console.log('Page de test charg√©e. Cliquez sur "D√©marrer Mario" pour jouer !');
        });
        
        // Debug shortcuts
        document.addEventListener('keydown', (e) => {
            if (e.ctrlKey) {
                switch(e.code) {
                    case 'Digit1':
                        givePowerUp();
                        e.preventDefault();
                        break;
                    case 'KeyD':
                        toggleDebug();
                        e.preventDefault();
                        break;
                    case 'KeyN':
                        nextLevel();
                        e.preventDefault();
                        break;
                }
            }
        });
    </script>
</body>
</html>
